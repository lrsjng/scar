/*! scar v2.3.2 - https://larsjung.de/scar/ */
((t,e)=>{"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("scar",[],e):"object"==typeof exports?exports.scar=e():t.scar=e()})("undefined"!=typeof self?self:this,()=>{return r=[(t,e,n)=>{function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)),r}function c(r){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?u(Object(o),!0).forEach(function(t){var e,n;e=r,n=o[t=t],(t=(t=>(t=((t,e)=>{if("object"!=i(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);if("object"!=i(n=n.call(t,e||"default")))return n;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string"),"symbol"==i(t)?t:t+""))(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):u(Object(o)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(o,t))})}return r}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function a(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(a=function(){return!!t})()}function r(){function r(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];o.push(function(t,e,n){var r;return a()?Reflect.construct.apply(null,arguments):((r=[null]).push.apply(r,e),e=new(t.bind.apply(t,r)),n&&s(e,n.prototype),e)}(l,e))}var o=[];return r.skip=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return r.apply(void 0,e.concat([{skip:!0}]))},r.sync=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return r.apply(void 0,e.concat([{sync:!0}]))},r.run=function(t){return t=c(c({reporter:p},t),{},{tests:o}),new f(t).run()},r.cli=function(t){return y(r.run,t)},r}var l=n(1),f=n(3),p=n(4),y=n(6);t.exports={scar:r,test:r(),assert:n(7),insp:n(8),spy:n(9),uniq:n(10)}},(t,e,n)=>{function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(t=>(t=((t,e)=>{if("object"!=o(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);if("object"!=o(n=n.call(t,e||"default")))return n;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string"),"symbol"==o(t)?t:t+""))(r.key),r)}}var n=n(2),c=n.is_str,i=n.is_num,s=n.is_fn,a=n.as_fn,n=(()=>{function u(){var e=this,t=this,n=u;if(!(t instanceof n))throw new TypeError("Cannot call a class as a function");this.desc="[No Description]",this.fn=null,this.skip=!1,this.sync=!1,this.timeout=null;for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];o.forEach(function(t){c(t)?e.desc=t:s(t)?e.fn=t:Object.assign(e,t)}),this.status=u.WAITING,this.err=null,this.starttime=null,this.duration=null,this.promise=null}return t=u,(e=[{key:"__TRACE_MARKER__",value:function(){return a(this.fn)()}},{key:"run",value:function(){var e=this;return this.promise=this.promise||Promise.resolve().then(function(){var t,n;return e.starttime=Date.now(),e.status=u.PENDING,e.skip?null:(t=Promise.resolve().then(function(){return e.__TRACE_MARKER__()}),t=t,n=e.timeout,!i(n)||n<=0?t:Promise.race([t,new Promise(function(t,e){setTimeout(function(){return e(new Error("Timeout (".concat(n,"ms)")))},n)})]))}).then(function(){e.status=e.skip?u.SKIPPED:u.PASSED}).catch(function(t){e.status=u.FAILED,e.err=t}).then(function(){e.duration=Date.now()-e.starttime}),this.promise}}])&&r(t.prototype,e),n&&r(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n})();n.WAITING="WAITING",n.PENDING="PENDING",n.PASSED="PASSED",n.FAILED="FAILED",n.SKIPPED="SKIPPED",t.exports=n},t=>{function e(t){return"function"==typeof t}function n(t){return t.reduce(function(t,e){return t.then(e)},Promise.resolve())}t.exports={is_bool:function(t){return"boolean"==typeof t},is_num:function(t){return"number"==typeof t},is_str:function(t){return"string"==typeof t},is_arr:function(t){return Array.isArray(t)},is_fn:e,is_regexp:function(t){return t instanceof RegExp},is_plain_obj:function(t){return"[object Object]"===Reflect.apply(Object.prototype.toString,t,[])},as_fn:function(t){return e(t)?t:function(){return t}},run_seq:n,run_conc:function(i){var u=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1024;return u<2?n(i):new Promise(function(t){var e=(i=Array.from(i)).length,n=0,r=function(t){return Promise.resolve().then(t).catch(function(){}).then(function(){--n,--e})},o=function(){for(;i.length&&n<u;)r(i.shift()).then(o),n+=1;e||t()};o()})}}},(t,e,n)=>{function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(t=>(t=((t,e)=>{if("object"!=o(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);if("object"!=o(n=n.call(t,e||"default")))return n;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string"),"symbol"==o(t)?t:t+""))(r.key),r)}}var r=n(2),u=r.as_fn,c=r.run_seq,s=r.run_conc,a=n(1),r=(()=>{function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.sync=!1,this.reporter=null,this.filter=null,this.max_conc=64,this.tests=[],Object.assign(this,t),this.status=a.WAITING,this.starttime=null,this.duration=null,this.promise=null}return t=e,(n=[{key:"run_test",value:function(t){var e=this;return Promise.resolve().then(function(){return u(e.reporter)("before_test",e,t)}).then(function(){e.run_count+=1,t.run_idx=e.run_count}).then(function(){return t.run()}).then(function(){e.settled_count+=1,t.settled_idx=e.settled_count,t.status===a.PASSED?(e.passed_count+=1,t.passed_idx=e.passed_count):t.status===a.SKIPPED?(e.skipped_count+=1,t.skipped_idx=e.skipped_count):(e.failed_count+=1,t.failed_idx=e.failed_count)}).then(function(){return u(e.reporter)("after_test",e,t)})}},{key:"run",value:function(){var o=this;return this.promise=this.promise||Promise.resolve().then(function(){o.tests.forEach(function(t,e){t.def_idx=e+1}),o.total=o.tests.length,o.filtered_tests=o.tests.filter(u(o.filter||!0)),o.filtered_total=o.filtered_tests.length,o.run_count=0,o.settled_count=0,o.passed_count=0,o.failed_count=0,o.skipped_count=0}).then(function(){return u(o.reporter)("before_all",o)}).then(function(){o.starttime=Date.now(),o.status=a.PENDING;function t(t){return function(){return o.run_test(t)}}var e=o.filtered_tests,n=o.sync?e:e.filter(function(t){return!!t.sync}),e=o.sync?[]:e.filter(function(t){return!t.sync}),n=n.map(t),r=e.map(t);return c(n).then(function(){return s(r,o.max_conc)})}).then(function(){o.status=o.failed_count?a.FAILED:a.PASSED,o.duration=Date.now()-o.starttime}).then(function(){return u(o.reporter)("after_all",o)}).then(function(){return o}),this.promise}}])&&i(t.prototype,n),r&&i(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,r})();t.exports=r},(t,e,n)=>{function o(t){console.log(t)}var r,i,u=n(5),c=n(1),s=n.g.window&&n.g.window.document,n="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH3wsZER*AAAAAElFTkSuQmCC",a=n.replace("*","Y0VbWlewAAAB1JREFUOMtj/OJs9p+BAsDEQCEYNWDUgFEDBosBABZOAow9yV0y"),l=n.replace("*","kM+i8BKgAAAB1JREFUOMtj9Fkf8J+BAsDEQCEYNWDUgFEDBosBAIuhAmqCXURi"),f=n.replace("*","kjUf48cwAAAB1JREFUOMtjDA0N/c9AAWBioBCMGjBqwKgBg8UAAFduAh79mcom"),p=s?(r=s.querySelector("head"),i="shortcut icon",function(t,e){s.title=t;t=r.querySelector('link[rel="'.concat(i,'"]'));t&&r.removeChild(t),r.appendChild(Object.assign(s.createElement("link"),{rel:i,href:e}))}):function(){return null};t.exports=function(t,e,n){var r;return"before_all"===t?(r="running ",e.filtered_total!==e.total&&(r+="".concat(e.filtered_total," of ")),r+="".concat(e.total," tests\n "),o(r),p("running ".concat(e.filtered_total," tests..."),f),new Promise(function(t){return setTimeout(function(){return t()},30)})):("after_test"===t&&(r=n.status===c.PASSED?" ok ":n.status===c.SKIPPED?"skip":"FAIL",o(" ".concat(r," ").concat(n.desc))),"after_all"===t&&(e.tests.filter(function(t){return t.status===c.FAILED}).forEach(function(t){var e=u(t.err,"  ");o("\n[".concat(t.failed_idx,"] ").concat(t.desc,"\n").concat(e))}),r="\n",e.failed_count&&(r+="".concat(e.failed_count," failed, ")),e.skipped_count&&(r+="".concat(e.skipped_count," skipped, ")),r+="".concat(e.passed_count," passed (").concat(e.duration,"ms)"),o(r),p(r,e.failed_count?a:l)),null)}},t=>{var i=[{re:/^\s*at\s+(.*?)\s+\((.*?)(?::(\d+))?(?::(\d+))?\)\s*$/,method:1,url:2,line:3,column:4},{re:/^\s*at\s+(.*?)(?::(\d+))?(?::(\d+))?\s*$/,method:null,url:1,line:2,column:3},{re:/^(.*?)@(.*?)(?::(\d+))?(?::(\d+))?\s*$/,method:1,url:2,line:3,column:4}],a=/\b__TRACE_MARKER__\b|^process\._tickCallback$/,l=function(t){for(var e=0,n=i;e<n.length;e++){var r=n[e],o=r.re.exec(t);if(o)return{method:o[r.method]||"",url:o[r.url],basename:o[r.url].replace(/^.*\//,""),line:parseInt(o[r.line],10),column:parseInt(o[r.column],10),drop:!1}}return null};t.exports=function(t){var n,r,o,e,i,u=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",c=2<arguments.length&&void 0!==arguments[2]&&arguments[2],s=3<arguments.length&&void 0!==arguments[3]&&arguments[3];i=t.stack,n=t.drop,n=Number(n)||0,i=i.split("\n").map(function(t){return l(t)}).filter(function(t){return t}),r=!1,i.forEach(function(t,e){r=r||a.test(t.method),t.drop=e<n||r});return u+("".concat(t.name,": ").concat(t.message,"\n")+(o=c,e=s,i.filter(function(t){return e||!t.drop}).map(function(t){var e=t.drop?"      ":"  ->  ";return e+=[o?t.basename:t.url,t.line,t.column].filter(function(t){return t}).join("  "),t.method&&(e+="  (".concat(t.method,")")),e}).join("\n"))).replace(/\n/g,"\n"+u)}},(t,e,n)=>{function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)),r}function o(r){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?u(Object(o),!0).forEach(function(t){var e,n;e=r,n=o[t=t],(t=(t=>(t=((t,e)=>{if("object"!=i(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);if("object"!=i(n=n.call(t,e||"default")))return n;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string"),"symbol"==i(t)?t:t+""))(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):u(Object(o)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(o,t))})}return r}var c=n.g.process,s=n.g.window,a=console.log.bind(console);t.exports=function(n,r){return Promise.resolve().then(function(){return s?new Promise(function(t){s.addEventListener("load",function(){return t()})}):null}).then(function(){e=[],c?e=c.argv.slice(2):s&&(e=s.location.href.split(/[\?&]+/).slice(1));var t,e={show_help:e.includes("-h"),filters:e.filter(function(t){return t.length&&"-"!==t[0]})};return e.show_help?(a("scar - a test runner for node and the browser\n\nUsage:\n  node tests.js [opt...] [arg...]\n  tests.html?opt&...&arg&...\n\nOptions:\n  -h: show this help message\n\nArguments:\n  all arguments are used as test filters\n"),null):(r=o(o({},r),{},{filter:(t=e.filters,function(e){return t.every(function(t){return e.desc.includes(t)})})}),n(r).then(function(t){c&&t.failed_count&&c.exit(1)}).catch(function(t){a("\n".concat(t.stack,"\n")),c&&c.exit(2)}))})}},(t,e,n)=>{function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t){return Reflect.apply(Object.prototype.toString,t,[])}function u(n,r){var t;return!!(n===r||Number.isNaN(n)&&Number.isNaN(r))||("object"!==(t=o(n))&&t===o(r)?n===r:(t=i(n))===i(r)&&("[object Array]"===t?n.length===r.length&&n.every(function(t,e){return u(n[e],r[e])}):"[object Object]"===t&&(t=Object.keys(n),u(t.sort(),Object.keys(r).sort()))&&t.every(function(t){return u(n[t],r[t])})))}function c(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:2;if(!t)throw Object.assign(new Error(e),{name:"AssertionError",drop:n})}function s(t,e,n){f(e)?(t=String(t),c(e.test(t),n||"expected error ".concat(p(t)," to be matched by ").concat(p(e)),3)):l(e)?e(t):void 0!==e&&c(t===e,n||"expected error ".concat(p(t)," to be ").concat(p(e)),3)}function r(t,e){c(t,e)}var a=n(2),l=a.is_fn,f=a.is_regexp,p=n(8);r.fail=function(t){c(!1,t)},r.ok=function(t,e){c(!!t,e||"expected ".concat(p(t)," to be truthy"))},r.not_ok=function(t,e){c(!t,e||"expected ".concat(p(t)," to be falsy"))},r.equal=function(t,e,n){c(t===e,n||"expected ".concat(p(t)," to equal ").concat(p(e)))},r.not_equal=function(t,e,n){c(t!==e,n||"expected ".concat(p(t)," not to equal ").concat(p(e)))},r.deep_equal=function(t,e,n){c(u(t,e),n||"expected ".concat(p(t)," to deeply equal ").concat(p(e)))},r.not_deep_equal=function(t,e,n){c(!u(t,e),n||"expected ".concat(p(t)," not to deeply equal ").concat(p(e)))},r.throws=function(t,e,n){c(l(t),"expected ".concat(p(t)," to be a function"));var r={},o=r;try{o=t()}catch(t){s(t,e,n)}c(o===r,n||"expected fn to throw but returned ".concat(o))},r.rejects=function(t,e,n){return Promise.resolve(t).then(function(t){return c(!1,n||"expected rejection but resolved to ".concat(t))},function(t){return s(t,e,n)})},(t.exports=r).notOk=r.not_ok,r.notEqual=r.not_equal,r.deepEqual=r.deep_equal,r.notDeepEqual=r.not_deep_equal},(t,e,n)=>{function r(e){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];return n.includes(e)?"[circular]":(n.push(e),o(e)?"'".concat(e,"'"):i(e)?String(e).split(")")[0]+")":u(e)?"["+Array.from(e,function(t){return r(t,n)}).join(", ")+"]":c(e)?"{"+Object.keys(e).map(function(t){return"".concat(t,": ").concat(r(e[t],n))}).join(", ")+"}":String(e))}var n=n(2),o=n.is_str,i=n.is_fn,u=n.is_arr,c=n.is_plain_obj;t.exports=r},(t,e,n)=>{var r=n(2).as_fn;t.exports=function(e){var n=[];function t(){var t={idx:n.length,time:Date.now(),ctx:this,args:Array.from(arguments)};return n.push(t),t.ret=r(e)(t,n),t.done=Date.now(),t.ret}return t.calls=n,t}},t=>{function e(){return"UNIQ-"+("0000"+(o+=1)).substr(-4)+"-ID"}function n(t){return r.test(t)}var r=new RegExp("^".concat("UNIQ-","\\d{").concat(4,"}").concat("-ID","$")),o=0;t.exports={id:e,is_id:n,isId:n,obj:function(){return{_uniq_id:e()}},path:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";return"_uniq_path/"+e()+t}}}],o={},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n(0);function n(t){var e=o[t];return void 0!==e||(e=o[t]={exports:{}},r[t](e,e.exports,n)),e.exports}var r,o});