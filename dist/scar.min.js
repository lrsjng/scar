/*! scar v2.3.0 - https://larsjung.de/scar/ */
!function(t,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define("scar",[],n):"object"==typeof exports?exports.scar=n():t.scar=n()}("undefined"!=typeof self?self:this,function(){return r={},o.m=e=[function(t,n,e){function r(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})),e.push.apply(e,r)}return e}function i(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?r(Object(e),!0).forEach(function(t){o(n,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):r(Object(e)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))})}return n}function o(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}function u(t,n,e){return(u=function(){if("undefined"==typeof Reflect||!Reflect.construct)return;if(Reflect.construct.sham)return;if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(t){return}}()?Reflect.construct:function(t,n,e){var r=[null];r.push.apply(r,n);var o=new(Function.bind.apply(t,r));return e&&c(o,e.prototype),o}).apply(null,arguments)}function c(t,n){return(c=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,n)}function s(){function r(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];o.push(u(a,n))}var o=[];return r.skip=function(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return r.apply(void 0,n.concat([{skip:!0}]))},r.sync=function(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return r.apply(void 0,n.concat([{sync:!0}]))},r.run=function(t){return t=i(i({reporter:l},t),{},{tests:o}),new f(t).run()},r.cli=function(t){return p(r.run,t)},r}var a=e(1),f=e(3),l=e(4),p=e(7);t.exports={scar:s,test:s(),assert:e(8),insp:e(9),spy:e(10),uniq:e(11)}},function(t,n,e){function r(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var o=e(2),i=o.is_str,u=o.is_num,c=o.is_fn,s=o.as_fn,a=function(){function o(){var n=this;!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,o),this.desc="[No Description]",this.fn=null,this.skip=!1,this.sync=!1,this.timeout=null;for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];e.forEach(function(t){i(t)?n.desc=t:c(t)?n.fn=t:Object.assign(n,t)}),this.status=o.WAITING,this.err=null,this.starttime=null,this.duration=null,this.promise=null}var t,n,e;return t=o,(n=[{key:"__TRACE_MARKER__",value:function(){return s(this.fn)()}},{key:"run",value:function(){var r=this;return this.promise=this.promise||Promise.resolve().then(function(){if(r.starttime=Date.now(),r.status=o.PENDING,r.skip)return null;var t,e,n=Promise.resolve().then(function(){return r.__TRACE_MARKER__()});return t=n,e=r.timeout,!u(e)||e<=0?t:Promise.race([t,new Promise(function(t,n){setTimeout(function(){return n(new Error("Timeout (".concat(e,"ms)")))},e)})])}).then(function(){r.status=r.skip?o.SKIPPED:o.PASSED}).catch(function(t){r.status=o.FAILED,r.err=t}).then(function(){r.duration=Date.now()-r.starttime}),this.promise}}])&&r(t.prototype,n),e&&r(t,e),o}();a.WAITING="WAITING",a.PENDING="PENDING",a.PASSED="PASSED",a.FAILED="FAILED",a.SKIPPED="SKIPPED",t.exports=a},function(t,n){function e(t){return"function"==typeof t}function r(t){return t.reduce(function(t,n){return t.then(n)},Promise.resolve())}t.exports={is_bool:function(t){return"boolean"==typeof t},is_num:function(t){return"number"==typeof t},is_str:function(t){return"string"==typeof t},is_arr:function(t){return Array.isArray(t)},is_fn:e,is_regexp:function(t){return t instanceof RegExp},is_plain_obj:function(t){return"[object Object]"===Reflect.apply(Object.prototype.toString,t,[])},as_fn:function(t){return e(t)?t:function(){return t}},run_seq:r,run_conc:function(i,t){var u=1<arguments.length&&void 0!==t?t:1024;return u<2?r(i):new Promise(function(e){var r=(i=Array.from(i)).length,o=0;!function t(){for(;i.length&&o<u;)n=i.shift(),Promise.resolve().then(n).catch(function(){}).then(function(){--o,--r}).then(t),o+=1;var n;r||e()}()})}}},function(t,n,e){function o(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var r=e(2),i=r.as_fn,c=r.run_seq,s=r.run_conc,a=e(1),u=function(){function n(t){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n),this.sync=!1,this.reporter=null,this.filter=null,this.max_conc=64,this.tests=[],Object.assign(this,t),this.status=a.WAITING,this.starttime=null,this.duration=null,this.promise=null}var t,e,r;return t=n,(e=[{key:"run_test",value:function(t){var n=this;return Promise.resolve().then(function(){return i(n.reporter)("before_test",n,t)}).then(function(){n.run_count+=1,t.run_idx=n.run_count}).then(function(){return t.run()}).then(function(){n.settled_count+=1,t.settled_idx=n.settled_count,t.status===a.PASSED?(n.passed_count+=1,t.passed_idx=n.passed_count):t.status===a.SKIPPED?(n.skipped_count+=1,t.skipped_idx=n.skipped_count):(n.failed_count+=1,t.failed_idx=n.failed_count)}).then(function(){return i(n.reporter)("after_test",n,t)})}},{key:"run",value:function(){var u=this;return this.promise=this.promise||Promise.resolve().then(function(){u.tests.forEach(function(t,n){t.def_idx=n+1}),u.total=u.tests.length,u.filtered_tests=u.tests.filter(i(u.filter||!0)),u.filtered_total=u.filtered_tests.length,u.run_count=0,u.settled_count=0,u.passed_count=0,u.failed_count=0,u.skipped_count=0}).then(function(){return i(u.reporter)("before_all",u)}).then(function(){u.starttime=Date.now(),u.status=a.PENDING;function t(t){return function(){return u.run_test(t)}}var n=u.filtered_tests,e=u.sync?n:n.filter(function(t){return!!t.sync}),r=u.sync?[]:n.filter(function(t){return!t.sync}),o=e.map(t),i=r.map(t);return c(o).then(function(){return s(i,u.max_conc)})}).then(function(){u.status=u.failed_count?a.FAILED:a.PASSED,u.duration=Date.now()-u.starttime}).then(function(){return i(u.reporter)("after_all",u)}).then(function(){return u}),this.promise}}])&&o(t.prototype,e),r&&o(t,r),n}();t.exports=u},function(e,t,d){(function(t){function u(t){return console.log(t)}var r,o,c=d(6),s=d(1),i=t.window&&t.window.document,n="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH3wsZER*AAAAAElFTkSuQmCC",a=n.replace("*","Y0VbWlewAAAB1JREFUOMtj/OJs9p+BAsDEQCEYNWDUgFEDBosBABZOAow9yV0y"),f=n.replace("*","kM+i8BKgAAAB1JREFUOMtj9Fkf8J+BAsDEQCEYNWDUgFEDBosBAIuhAmqCXURi"),l=n.replace("*","kjUf48cwAAAB1JREFUOMtjDA0N/c9AAWBioBCMGjBqwKgBg8UAAFduAh79mcom"),p=i?(r=i.querySelector("head"),o="shortcut icon",function(t,n){i.title=t;var e=r.querySelector('link[rel="'.concat(o,'"]'));e&&r.removeChild(e),r.appendChild(Object.assign(i.createElement("link"),{rel:o,href:n}))}):function(){return null};e.exports=function(t,n,e){if("before_all"===t){var r="running ";return n.filtered_total!==n.total&&(r+="".concat(n.filtered_total," of ")),r+="".concat(n.total," tests\n "),u(r),p("running ".concat(n.filtered_total," tests..."),l),new Promise(function(t){return setTimeout(function(){return t()},30)})}if("after_test"===t){var o=e.status===s.PASSED?" ok ":e.status===s.SKIPPED?"skip":"FAIL";u(" ".concat(o," ").concat(e.desc))}if("after_all"===t){n.tests.filter(function(t){return t.status===s.FAILED}).forEach(function(t){var n=c(t.err,"  ");u("\n[".concat(t.failed_idx,"] ").concat(t.desc,"\n").concat(n))});var i="\n";n.failed_count&&(i+="".concat(n.failed_count," failed, ")),n.skipped_count&&(i+="".concat(n.skipped_count," skipped, ")),i+="".concat(n.passed_count," passed (").concat(n.duration,"ms)"),u(i),p(i,n.failed_count?a:f)}return null}}).call(this,d(5))},function(t,n){var e;e=function(){return this}();try{e=e||new Function("return this")()}catch(t){"object"==typeof window&&(e=window)}t.exports=e},function(t,n){function i(t,n){var e;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(e=function(t,n){if(!t)return;if("string"==typeof t)return s(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return Array.from(t);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return s(t,n)}(t))||n&&t&&"number"==typeof t.length){e&&(t=e);function r(){}var o=0;return{s:r,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,u=!0,c=!1;return{s:function(){e=t[Symbol.iterator]()},n:function(){var t=e.next();return u=t.done,t},e:function(t){c=!0,i=t},f:function(){try{u||null==e.return||e.return()}finally{if(c)throw i}}}}function s(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}function f(t,e){e=Number(e)||0;var n=t.split("\n").map(function(t){return function(t){var n,e=i(u);try{for(e.s();!(n=e.n()).done;){var r=n.value,o=r.re.exec(t);if(o)return{method:o[r.method]||"",url:o[r.url],basename:o[r.url].replace(/^.*\//,""),line:parseInt(o[r.line],10),column:parseInt(o[r.column],10),drop:!1}}}catch(t){e.e(t)}finally{e.f()}return null}(t)}).filter(function(t){return t}),r=!1;return n.forEach(function(t,n){r=r||o.test(t.method),t.drop=n<e||r}),n}var u=[{re:/^\s*at\s+(.*?)\s+\((.*?)(?::(\d+))?(?::(\d+))?\)\s*$/,method:1,url:2,line:3,column:4},{re:/^\s*at\s+(.*?)(?::(\d+))?(?::(\d+))?\s*$/,method:null,url:1,line:2,column:3},{re:/^(.*?)@(.*?)(?::(\d+))?(?::(\d+))?\s*$/,method:1,url:2,line:3,column:4}],o=/\b__TRACE_MARKER__\b|^process\._tickCallback$/;t.exports=function(t,n,e,r){var o,i,u=1<arguments.length&&void 0!==n?n:"",c=2<arguments.length&&void 0!==e&&e,s=3<arguments.length&&void 0!==r&&r,a=f(t.stack,t.drop);return u+("".concat(t.name,": ").concat(t.message,"\n")+(o=c,i=s,a.filter(function(t){return i||!t.drop}).map(function(t){var n=t.drop?"      ":"  ->  ";return n+=[o?t.basename:t.url,t.line,t.column].filter(function(t){return t}).join("  "),t.method&&(n+="  (".concat(t.method,")")),n}).join("\n"))).replace(/\n/g,"\n"+u)}},function(n,t,e){(function(t){function r(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})),e.push.apply(e,r)}return e}function i(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?r(Object(e),!0).forEach(function(t){o(n,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):r(Object(e)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))})}return n}function o(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}var u=t.process,c=t.window,s=console.log.bind(console);n.exports=function(r,o){return Promise.resolve().then(function(){return c?new Promise(function(t){c.addEventListener("load",function(){return t()})}):null}).then(function(){var t,e,n=(t=[],u?t=u.argv.slice(2):c&&(t=c.location.href.split(/[\?&]+/).slice(1)),{show_help:t.includes("-h"),filters:t.filter(function(t){return t.length&&"-"!==t[0]})});return n.show_help?(s("scar - a test runner for node and the browser\n\nUsage:\n  node tests.js [opt...] [arg...]\n  tests.html?opt&...&arg&...\n\nOptions:\n  -h: show this help message\n\nArguments:\n  all arguments are used as test filters\n"),null):(o=i(i({},o),{},{filter:(e=n.filters,function(n){return e.every(function(t){return n.desc.includes(t)})})}),r(o).then(function(t){u&&t.failed_count&&u.exit(1)}).catch(function(t){s("\n".concat(t.stack,"\n")),u&&u.exit(2)}))})}}).call(this,e(5))},function(t,n,e){function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t){return Reflect.apply(Object.prototype.toString,t,[])}function u(e,r){if(e===r||Number.isNaN(e)&&Number.isNaN(r))return!0;var t=o(e);if("object"!==t&&t===o(r))return e===r;if((t=i(e))!==i(r))return!1;if("[object Array]"===t)return e.length===r.length&&e.every(function(t,n){return u(e[n],r[n])});if("[object Object]"!==t)return!1;var n=Object.keys(e);return u(n.sort(),Object.keys(r).sort())&&n.every(function(t){return u(e[t],r[t])})}function c(t,n,e){var r=2<arguments.length&&void 0!==e?e:2;if(!t)throw Object.assign(new Error(n),{name:"AssertionError",drop:r})}function s(t,n,e){l(n)?(t=String(t),c(n.test(t),e||"expected error ".concat(p(t)," to be matched by ").concat(p(n)),3)):f(n)?n(t):void 0!==n&&c(t===n,e||"expected error ".concat(p(t)," to be ").concat(p(n)),3)}function r(t,n){c(t,n)}var a=e(2),f=a.is_fn,l=a.is_regexp,p=e(9);r.fail=function(t){c(!1,t)},r.ok=function(t,n){c(!!t,n||"expected ".concat(p(t)," to be truthy"))},r.not_ok=function(t,n){c(!t,n||"expected ".concat(p(t)," to be falsy"))},r.equal=function(t,n,e){c(t===n,e||"expected ".concat(p(t)," to equal ").concat(p(n)))},r.not_equal=function(t,n,e){c(t!==n,e||"expected ".concat(p(t)," not to equal ").concat(p(n)))},r.deep_equal=function(t,n,e){c(u(t,n),e||"expected ".concat(p(t)," to deeply equal ").concat(p(n)))},r.not_deep_equal=function(t,n,e){c(!u(t,n),e||"expected ".concat(p(t)," not to deeply equal ").concat(p(n)))},r.throws=function(t,n,e){c(f(t),"expected ".concat(p(t)," to be a function"));var r={},o=r;try{o=t()}catch(t){s(t,n,e)}c(o===r,e||"expected fn to throw but returned ".concat(o))},r.rejects=function(t,n,e){return Promise.resolve(t).then(function(t){return c(!1,e||"expected rejection but resolved to ".concat(t))},function(t){return s(t,n,e)})},(t.exports=r).notOk=r.not_ok,r.notEqual=r.not_equal,r.deepEqual=r.deep_equal,r.notDeepEqual=r.not_deep_equal},function(t,n,e){var r=e(2),o=r.is_str,i=r.is_fn,u=r.is_arr,c=r.is_plain_obj;t.exports=function n(e,t){var r=1<arguments.length&&void 0!==t?t:[];return r.includes(e)?"[circular]":(r.push(e),o(e)?"'".concat(e,"'"):i(e)?String(e).split(")")[0]+")":u(e)?"["+Array.from(e,function(t){return n(t,r)}).join(", ")+"]":c(e)?"{"+Object.keys(e).map(function(t){return"".concat(t,": ").concat(n(e[t],r))}).join(", ")+"}":String(e))}},function(t,n,e){var r=e(2).as_fn;t.exports=function(n){var e=[];function t(){"use strict";var t={idx:e.length,time:Date.now(),ctx:this,args:Array.from(arguments)};return e.push(t),t.ret=r(n)(t,e),t.done=Date.now(),t.ret}return t.calls=e,t}},function(t,n){function e(){return"UNIQ-"+("0000"+(i+=1)).substr(-4)+"-ID"}function r(t){return o.test(t)}var o=new RegExp("^".concat("UNIQ-","\\d{").concat(4,"}").concat("-ID","$")),i=0;t.exports={id:e,is_id:r,isId:r,obj:function(){return{_uniq_id:e()}},path:function(t){var n=0<arguments.length&&void 0!==t?t:"";return"_uniq_path/"+e()+n}}}],o.c=r,o.d=function(t,n,e){o.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:e})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(n,t){if(1&t&&(n=o(n)),8&t)return n;if(4&t&&"object"==typeof n&&n&&n.__esModule)return n;var e=Object.create(null);if(o.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:n}),2&t&&"string"!=typeof n)for(var r in n)o.d(e,r,function(t){return n[t]}.bind(null,r));return e},o.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(n,"a",n),n},o.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},o.p="",o(o.s=0);function o(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}var e,r});